"use strict";(self["webpackChunkeditor"]=self["webpackChunkeditor"]||[]).push([[729],{6729:function(t,i,e){e.r(i),e.d(i,{default:function(){return V}});var s=e(3396),n=e(7139);const o={class:"flex",style:{"justify-content":"center"}},c={class:"top"},l=["onClick"],a={class:"content"},r={class:"bottom m-b-10"},m=["onClick"],d=["onClick"],u=["onClick"];function h(t,i,e,h,x,b){const v=(0,s.up)("circle-vue"),p=(0,s.up)("add-timer");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("button",{onClick:i[0]||(i[0]=(...t)=>b.add&&b.add(...t)),class:"m-t-30",style:{"margin-left":"10%","align-self":"baseline"}}," 新增 "),(0,s._)("div",{class:"timer",style:(0,n.j5)(x.boxs.length>4?"height:100%;":"")},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.boxs,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["box",(i%2===1?"m-l-10 ":"")+(i>1?"m-t-10":"")]),key:t.id},[(0,s._)("div",c,[(0,s._)("span",null,(0,n.zw)(t.title),1),(0,s._)("span",{class:"big",onClick:i=>b.deleteOne(t.id)},"删除",8,l)]),(0,s._)("div",a,[(0,s.Wm)(v,{startnum:t.startnum||0,id:"canvas"+t.id,text:t.text},null,8,["startnum","id","text"])]),(0,s._)("div",r,[!1===t.stop?((0,s.wg)(),(0,s.iD)("span",{key:0,onClick:t=>x.boxs[i].stop=!0},"暂停",8,m)):(0,s.kq)("",!0),!0===t.stop?((0,s.wg)(),(0,s.iD)("span",{key:1,onClick:e=>b.start(t,i)},"开始",8,d)):(0,s.kq)("",!0),(0,s._)("span",{onClick:t=>b.reset(i)}," 重置",8,u)])],2)))),128)),(0,s.Wm)(p,{visible:x.visible,onSubmit:b.addTimer},null,8,["visible","onSubmit"])],4)])}e(7658);const x=["id"],b=(0,s._)("p",null,"加载失败",-1),v=[b];function p(t,i,e,o,c,l){return(0,s.wg)(),(0,s.iD)("canvas",{id:e.id,style:(0,n.j5)(e.ccStyle)},v,12,x)}var f=e(4870),k={data(){return{}},props:{ccStyle:{default:"width:100%;height:100%;",type:String},startnum:{type:Number,default:0},id:{default:"canvas",type:String},text:{default:"",type:String}},watch:{startnum(){}},setup(t){const i=(0,f.qj)({canvas:null,ctx:null,circleX:null,circleY:null,radius:60,percent:100,lineWidth:1,fontSize:28,startnum:0,timer:null});function e(t,e,s){i.ctx.beginPath(),i.ctx.lineWidth=i.lineWidth,i.ctx.strokeStyle="#666666",i.ctx.lineCap="round",i.ctx.shadowColor="#000000",i.ctx.shadowBlur=0,i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.arc(t,e,s+10,0,Math.PI/180*360),i.ctx.moveTo(t+s,e),i.ctx.arc(t,e,s,0,Math.PI/180*360),i.ctx.stroke()}function n(t,e,s,n,o,c){i.ctx.beginPath(),i.ctx.moveTo(t,e-s-5),i.ctx.lineWidth=12,i.ctx.strokeStyle="#000000",i.ctx.lineCap="round",i.ctx.shadowColor="#000000",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=4,i.ctx.arc(t,e,s+5,n*(Math.PI/180)-Math.PI/2,o*(Math.PI/180)-Math.PI/2,c),i.ctx.moveTo(t,e-s),i.ctx.moveTo(t,e-s),i.ctx.stroke()}function o(t,e,s){i.ctx.beginPath(),i.ctx.moveTo(t,e-s),i.ctx.clearRect(t-8,e-s-18,6,30)}function c(t,e,s,n,o,c){i.ctx.beginPath(),i.ctx.moveTo(t,e-s-5),i.ctx.lineWidth=10,i.ctx.strokeStyle="#000000",i.ctx.lineCap="round",i.ctx.shadowColor="#000000",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0,i.ctx.arc(t,e,s+5,n*(Math.PI/180)-Math.PI/2,o*(Math.PI/180)-Math.PI/2,c),i.ctx.moveTo(t,e-s),i.ctx.moveTo(t,e-s),i.ctx.stroke()}function l(s){i.ctx.clearRect(0,0,2*i.circleX,2*i.circleY),i.ctx.shadowColor="#1000f0",i.ctx.shadowBlur=4,i.ctx.font=i.fontSize+"px April",i.ctx.textAlign="center",i.ctx.textBaseline="middle",i.ctx.fillStyle="#ffccff",i.ctx.fillText(t.text?t.text:parseInt(s).toFixed(0)+"%",i.circleX,i.circleY),e(i.circleX,i.circleY,i.radius),n(i.circleX,i.circleY,i.radius,0,s/100*360),c(i.circleX,i.circleY,i.radius,0,s/100*360),o(i.circleX,i.circleY,i.radius)}async function a(){await l(i.startnum),i.timer=requestAnimationFrame(a),100===i.startnum&&cancelAnimationFrame(i.timer)}return(0,s.YP)((()=>t.startnum),(e=>{i.startnum=e,i.canvas=document.getElementById(t.id),i.ctx=i.canvas.getContext("2d"),i.circleX=i.canvas.width/2,i.circleY=i.canvas.height/2,a()})),{...(0,f.BK)(i)}},methods:{}},y=e(89);const _=(0,y.Z)(k,[["render",p]]);var w=_,g=e(9242);const C=t=>((0,s.dD)("data-v-36fb57b0"),t=t(),(0,s.Cn)(),t),T={key:0,class:"timer-add"},I=C((()=>(0,s._)("div",{class:"back"},null,-1))),O={class:"content"},P={class:"top-title"},S=C((()=>(0,s._)("div",null,"新增计时器",-1))),Y={class:"time"},$=["onClick"],D=["onClick"],X={class:"m-l-10"},M=["onClick"],W={class:"flex m-t-40"},B=C((()=>(0,s._)("span",null,"名称：",-1))),j={class:"footer m-t-30"};function z(t,i,e,o,c,l){const a=(0,s.up)("dialog-vue");return c.visibleOne?((0,s.wg)(),(0,s.iD)("div",T,[I,(0,s._)("div",O,[(0,s._)("div",P,[S,(0,s._)("i",{onClick:i[0]||(i[0]=t=>c.visibleOne=!1)},"x")]),(0,s._)("div",Y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.time,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"time-one",key:i},[(0,s._)("span",{class:"v-shape-top",onClick:t=>l.add(i)},null,8,$),(0,s._)("div",{class:"m-b-10 m-t-10",style:(0,n.j5)(c.clickTime===i?"background: #f6f6f6;":""),onClick:t=>c.clickTime=i},[(0,s._)("span",null,(0,n.zw)(i>0?":":""),1),(0,s._)("span",X,(0,n.zw)(t>=10?t:"0"+t),1)],12,D),(0,s._)("span",{class:"v-shape-bottom",onClick:t=>l.jian(i)},null,8,M)])))),128))]),(0,s._)("div",W,[B,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":i[1]||(i[1]=i=>t.name=i)},null,512),[[g.nr,t.name]])]),(0,s._)("div",j,[(0,s._)("button",{onClick:i[2]||(i[2]=(...t)=>l.submit&&l.submit(...t))},"保存"),(0,s._)("button",{class:"m-l-10",onClick:i[3]||(i[3]=t=>c.visibleOne=!1)},"取消")])]),(0,s.Wm)(a,{"dialog-title":"提示",visible:c.visibleTip,"onUpdate:visible":i[4]||(i[4]=t=>c.visibleTip=t)},{body:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(c.tip),1)])),_:1},8,["visible"])])):(0,s.kq)("",!0)}var q=e(6435),Z={components:{dialogVue:q.Z},props:{visible:{default:!1,type:Boolean}},data(){return{visibleOne:this.visible,visibleTip:!1,time:[0,0,0],clickTime:0,tip:""}},created(){},watch:{visible(t){this.visibleOne=t}},methods:{submit(){return this.name?0===this.time[0]&&0===this.time[1]&&0===this.time[2]?(this.tip="时间需要大于0",void(this.visibleTip=!0)):(this.$emit("submit",{name:this.name,time:this.time}),void(this.visibleOne=!1)):(this.tip="名称必填",void(this.visibleTip=!0))},add(t){this.time[t]++,this.clickTime=t,0===t?this.time[t]>100&&(this.time[t]=0):this.time[t]>60&&(this.time[t]=0)},jian(t){this.clickTime=t,this.time[t]--,0===t?this.time[t]<0&&(this.time[t]=100):this.time[t]<0&&(this.time[t]=60)}}};const A=(0,y.Z)(Z,[["render",z],["__scopeId","data-v-36fb57b0"]]);var F=A,K={components:{circleVue:w,addTimer:F},data(){return{startnum:0,visible:!1,boxs:[{timer:{minute:5,second:5,hour:0},yuan:{minute:5,second:5,hour:0},stop:!1,title:"五分钟",id:1}]}},created(){setInterval((()=>{this.startnum++,this.boxs=this.boxs.map((t=>(t.stop||(t.timer.second>0?t.timer.second--:t.timer.minute>0?(t.timer.minute--,t.timer.second=59):t.timer.hour>0?(t.timer.hour--,t.timer.minute=59,t.timer.second=59):(t.stop=!0,t.clear=!0),t.startnum=(60*t.timer.hour+t.timer.minute+t.timer.second/60)/(60*t.yuan.hour+t.yuan.minute+t.yuan.second/60)*100,t.text=`${t.timer.hour>=10?t.timer.hour:"0"+t.timer.hour}:${t.timer.minute>=10?t.timer.minute:"0"+t.timer.minute}:${t.timer.second>=10?t.timer.second:"0"+t.timer.second}`),t)))}),1e3)},methods:{add(){this.visible=!1,setTimeout((()=>{this.visible=!0}))},addTimer(t){this.visible=!1,this.boxs.push({timer:{minute:t.time[1],second:t.time[2],hour:t.time[0]},yuan:{minute:t.time[1],second:t.time[2],hour:t.time[0]},stop:!1,title:t.name,id:this.boxs.slice(-1)[0].id+1||1})},deleteOne(t){this.boxs=this.boxs.filter((i=>i.id!==t))},reset(t){this.boxs[t].timer={...this.boxs[t].yuan},this.boxs[t].stop=!0,this.boxs[t].startnum=(60*this.boxs[t].timer.hour+this.boxs[t].timer.minute+this.boxs[t].timer.second/60)/(60*this.boxs[t].yuan.hour+this.boxs[t].yuan.minute+this.boxs[t].yuan.second/60)*100,this.boxs[t].text=`${this.boxs[t].timer.hour>=10?this.boxs[t].timer.hour:"0"+this.boxs[t].timer.hour}:${this.boxs[t].timer.minute>=10?this.boxs[t].timer.minute:"0"+this.boxs[t].timer.minute}:${this.boxs[t].timer.second>=10?this.boxs[t].timer.second:"0"+this.boxs[t].timer.second}`},start(t,i){this.boxs[i].stop=!1,t.clear&&(this.boxs[i].timer={...this.boxs[i].yuan}),this.boxs[i].startnum=(60*this.boxs[i].timer.hour+this.boxs[i].timer.minute+this.boxs[i].timer.second/60)/(60*this.boxs[i].yuan.hour+this.boxs[i].yuan.minute+this.boxs[i].yuan.second/60)*100,this.boxs[i].text=`${this.boxs[i].timer.hour>=10?this.boxs[i].timer.hour:"0"+this.boxs[i].timer.hour}:${this.boxs[i].timer.minute>=10?this.boxs[i].timer.minute:"0"+this.boxs[i].timer.minute}:${this.boxs[i].timer.second>=10?this.boxs[i].timer.second:"0"+this.boxs[i].timer.second}`}}};const U=(0,y.Z)(K,[["render",h],["__scopeId","data-v-534aaf06"]]);var V=U},6435:function(t,i,e){e.d(i,{Z:function(){return v}});var s=e(3396),n=e(7139);const o=t=>((0,s.dD)("data-v-46b28abf"),t=t(),(0,s.Cn)(),t),c={key:0,class:"comm-dialog"},l=o((()=>(0,s._)("div",{class:"back"},null,-1))),a={class:"content"},r={class:"top-title"},m={class:"comm-sialog-body"},d={class:"footer"};function u(t,i,e,o,u,h){return u.visibleOne?((0,s.wg)(),(0,s.iD)("div",c,[l,(0,s._)("div",a,[(0,s._)("div",r,[(0,s._)("div",null,(0,n.zw)(e.dialogTitle),1),(0,s._)("i",{onClick:i[0]||(i[0]=(...t)=>h.close&&h.close(...t))},"x")]),(0,s._)("div",m,[(0,s.WI)(t.$slots,"body",{},void 0,!0)]),(0,s._)("div",d,[(0,s.WI)(t.$slots,"footer",{},void 0,!0)])])])):(0,s.kq)("",!0)}var h={props:{visible:{default:!1,type:Boolean},dialogTitle:{default:"",type:String}},data(){return{visibleOne:this.visible}},created(){},watch:{visible(t){this.visibleOne=t}},methods:{close(){this.visibleOne=!1,this.$emit("update:visible",!1)}}},x=e(89);const b=(0,x.Z)(h,[["render",u],["__scopeId","data-v-46b28abf"]]);var v=b}}]);
//# sourceMappingURL=729.02726df9.js.map