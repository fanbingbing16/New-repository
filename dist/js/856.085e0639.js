"use strict";(self["webpackChunkeditor"]=self["webpackChunkeditor"]||[]).push([[856],{2856:function(e,t,i){i.r(t),i.d(t,{default:function(){return k}});var s=i(3396),o=i(7139);const l=e=>((0,s.dD)("data-v-20695162"),e=e(),(0,s.Cn)(),e),h={class:"game"},n={class:"game-div"},r={class:"game-min"},b={class:"right-div"},a={class:"ass"},c={class:"score-div"},x=l((()=>(0,s._)("span",null,"得分:",-1))),d={style:{color:"red"}},y=l((()=>(0,s._)("div",{class:"control"},[(0,s._)("p",null,"说明：上下左右键控制游戏，左右健控制方块移动，下键加快下移的速度，上键变换")],-1)));function g(e,t,i,l,g,v){const u=(0,s.up)("el-button"),p=(0,s.up)("dialog-vue");return(0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",n,[(0,s._)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.boxs,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("p",{class:"element",key:t,style:(0,o.j5)({background:e.bg})},null,4)))),128))])))),128))]),(0,s._)("div",b,[(0,s._)("div",a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.ass,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("p",{class:"element",key:t,style:(0,o.j5)({background:e.bg})},null,4)))),128))])))),128))]),(0,s._)("div",c,[(0,s._)("div",null,[(0,s._)("p",null,[x,(0,s.Uk)(" "),(0,s._)("span",d,(0,o.zw)(g.score),1)])]),(0,s.Wm)(u,{class:"ztks",onClick:v.stopGame},{default:(0,s.w5)((()=>[(0,s.Uk)("暂停/开始")])),_:1},8,["onClick"])])])]),y,(0,s.Wm)(p,{dialogTitle:"提示",visible:g.visible,"onUpdate:visible":t[0]||(t[0]=e=>g.visible=e)},{body:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(g.tip),1)])),footer:(0,s.w5)((()=>[(0,s.Wm)(u,{onClick:v.init},{default:(0,s.w5)((()=>[(0,s.Uk)("重新开始")])),_:1},8,["onClick"])])),_:1},8,["visible"])])}i(7658);const v=["#2B7AF5","#2B9DF5","#79CFFF","#1B67DD","#4F94FF","#2180F2","#3FD0FF"],u=()=>{let e={site:[[0,4],[0,5],[0,6],[0,7]],color:v[0]},t={site:[[0,4],[0,5],[1,4],[1,5]],color:v[1]},i={site:[[0,5],[1,5],[2,4],[2,5]],color:v[2]},s={site:[[0,4],[1,4],[2,4],[2,5]],color:v[3]},o={site:[[0,5],[1,4],[1,5],[1,6]],color:v[4]},l={site:[[0,5],[0,6],[1,4],[1,5]],color:v[5]},h={site:[[0,4],[0,5],[1,5],[1,6]],color:v[6]};return[e,t,i,s,o,l,h]},p=[[{x:0,y:0},{x:1,y:-1},{x:2,y:-2},{x:3,y:-3}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:1},{x:0,y:-1},{x:-1,y:1},{x:-1,y:1}],[{x:0,y:0},{x:0,y:0},{x:-1,y:1},{x:-1,y:1}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:1,y:-1}],[{x:0,y:-1},{x:1,y:-2},{x:0,y:1},{x:1,y:0}],[{x:0,y:1},{x:1,y:-1},{x:0,y:0},{x:1,y:-2}]];var m=i(6435),S={components:{dialogVue:m.Z},data(){return{visible:!1,tip:"",row:20,col:10,boxs:[[{i:0,j:0,bg:"#eee"}]],ass:[],curType:0,boxSite:{},changeType:1,nextType:0,score:0,level:0,times:0,inter:null}},mounted(){this.init(),this.keyDown()},onUnmounted(){clearInterval(this.inter),this.inter=null},methods:{keyDown(){document.onkeydown=e=>{let t=e||event||window.event||arguments.callee.caller.arguments[0];t&&37==t.keyCode?this.moveLeft():t&&39==t.keyCode?this.moveRight():t&&38===t.keyCode?this.changeBox():t&&40===t.keyCode&&this.moveDown()}},validCol(){this.boxs=this.boxs.map(((e,t)=>{let i=0;if(e.map((e=>{"#000"===e.bg&&i++})),i===e.length){e=e.map((e=>(e.bg="#eee",e))),this.score+=e.length;for(let e=t-1;e>=0;e--)for(let t=0;t<this.col;t++)"#000"===this.boxs[e][t].bg&&(this.boxs[e][t].bg="#eee",this.boxs[e+1][t].bg="#000")}return e}))},begin(){this.inter&&clearInterval(this.inter),this.inter=setInterval((()=>{this.moveDown()}),300)},stopGame(){this.inter?(clearInterval(this.inter),this.inter=null):this.begin()},moveDown(){const e=this.boxSite.site.some((e=>{const t=this.boxs[e[0]+1]?.[e[1]];return!t||("#eee"!==t.bg&&t.bg!==this.boxSite.color||void 0)}));if(e){this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg="#000",e))),this.validCol(),this.changeType=1,this.curType=this.nextType,this.boxSite=u()[this.curType],clearInterval(this.inter);const e=this.boxSite.site.some((e=>{if("#eee"!==this.boxs[e[0]][e[1]].bg)return!0}));return e?(this.tip=`游戏失败，得分${this.score}`,void(this.visible=!0)):(this.randomNext(),void this.begin())}this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg="#eee",e[0]=e[0]+1,e))),this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg=this.boxSite.color,e)))},changeAss(){this.ass=[];for(let e=0;e<5;e++){this.ass.push([]);for(let t=0;t<5;t++)u()[this.nextType].site.some((i=>{if(i[0]+1===e&&i[1]-3===t)return this.ass[e].push({x:e,y:t,bg:u()[this.nextType].color}),!0}))||this.ass[e].push({x:e,y:t,bg:"#eee"})}},init(){this.score=0,this.visible=!1,this.times=0,this.level=0,this.changeType=1,this.inter&&clearInterval(),this.randomNext(),this.curType=this.nextType,this.randomNext(),this.boxs=[],this.boxSite=u()[this.curType];for(let e=0;e<this.row;e++){this.boxs.push([]);for(let t=0;t<this.col;t++)this.boxSite.site.some((i=>{if(i[0]===e&&i[1]===t)return this.boxs[e].push({x:e,y:t,bg:this.boxSite.color}),!0}))||this.boxs[e].push({x:e,y:t,bg:"#eee"})}this.begin()},randomNext(){this.nextType=Math.floor(7*Math.random()),this.changeAss()},moveLeft(){const e=this.boxSite.site.some((e=>{const t=this.boxs[e[0]]?.[e[1]-1];return!t||("#eee"!==t.bg&&t.bg!==this.boxSite.color||void 0)}));e||(this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg="#eee",e[1]=e[1]-1,e))),this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg=this.boxSite.color,e))))},moveRight(){const e=this.boxSite.site.some((e=>{const t=this.boxs[e[0]]?.[e[1]+1];return!t||("#eee"!==t.bg&&t.bg!==this.boxSite.color||void 0)}));e||(this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg="#eee",e[1]=e[1]+1,e))),this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg=this.boxSite.color,e))))},changeBox(){const e=this.boxSite.site.some(((e,t)=>{const i=this.boxs[e[0]+p[this.curType][t].x*this.changeType]?.[e[1]+p[this.curType][t].y*this.changeType];return!i||("#eee"!==i.bg&&i.bg!==this.boxSite.color||void 0)}));e||(this.boxSite.site=this.boxSite.site.map(((e,t)=>(this.boxs[e[0]][e[1]].bg="#eee",e[0]=e[0]+p[this.curType][t].x*this.changeType,e[1]=e[1]+p[this.curType][t].y*this.changeType,e))),this.boxSite.site=this.boxSite.site.map((e=>(this.boxs[e[0]][e[1]].bg=this.boxSite.color,e))),this.changeType=-this.changeType)}}},f=i(89);const w=(0,f.Z)(S,[["render",g],["__scopeId","data-v-20695162"]]);var k=w},6435:function(e,t,i){i.d(t,{Z:function(){return v}});var s=i(3396),o=i(7139);const l=e=>((0,s.dD)("data-v-46b28abf"),e=e(),(0,s.Cn)(),e),h={key:0,class:"comm-dialog"},n=l((()=>(0,s._)("div",{class:"back"},null,-1))),r={class:"content"},b={class:"top-title"},a={class:"comm-sialog-body"},c={class:"footer"};function x(e,t,i,l,x,d){return x.visibleOne?((0,s.wg)(),(0,s.iD)("div",h,[n,(0,s._)("div",r,[(0,s._)("div",b,[(0,s._)("div",null,(0,o.zw)(i.dialogTitle),1),(0,s._)("i",{onClick:t[0]||(t[0]=(...e)=>d.close&&d.close(...e))},"x")]),(0,s._)("div",a,[(0,s.WI)(e.$slots,"body",{},void 0,!0)]),(0,s._)("div",c,[(0,s.WI)(e.$slots,"footer",{},void 0,!0)])])])):(0,s.kq)("",!0)}var d={props:{visible:{default:!1,type:Boolean},dialogTitle:{default:"",type:String}},data(){return{visibleOne:this.visible}},created(){},watch:{visible(e){this.visibleOne=e}},methods:{close(){this.visibleOne=!1,this.$emit("update:visible",!1)}}},y=i(89);const g=(0,y.Z)(d,[["render",x],["__scopeId","data-v-46b28abf"]]);var v=g}}]);
//# sourceMappingURL=856.085e0639.js.map